// Tonal.js placeholder - in production use the actual Tonal library
window.Tonal = {
  Note: {
    midi: (note) => {
      const noteMap = {
        'C': 0, 'C#': 1, 'Db': 1, 'D': 2, 'D#': 3, 'Eb': 3,
        'E': 4, 'F': 5, 'F#': 6, 'Gb': 6, 'G': 7, 'G#': 8,
        'Ab': 8, 'A': 9, 'A#': 10, 'Bb': 10, 'B': 11
      };
      
      const match = note.match(/^([A-G][#b]?)(\d+)$/);
      if (!match) return null;
      
      const [, noteName, octave] = match;
      const semitone = noteMap[noteName];
      if (semitone === undefined) return null;
      
      return (parseInt(octave) + 1) * 12 + semitone;
    },
    
    fromMidi: (midi) => {
      const noteNames = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];
      const octave = Math.floor(midi / 12) - 1;
      const noteName = noteNames[midi % 12];
      return `${noteName}${octave}`;
    }
  },
  
  Scale: {
    get: (tonic, scaleName = 'major') => {
      const scales = {
        major: [0, 2, 4, 5, 7, 9, 11],
        minor: [0, 2, 3, 5, 7, 8, 10],
        chromatic: [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]
      };
      
      const intervals = scales[scaleName] || scales.major;
      const tonicMidi = Tonal.Note.midi(tonic + '4');
      if (!tonicMidi) return [];
      
      return intervals.map(interval => {
        const noteMidi = tonicMidi + interval;
        return Tonal.Note.fromMidi(noteMidi);
      });
    }
  },
  
  Chord: {
    detect: (notes) => {
      // Simple chord detection placeholder
      return ['C major'];
    }
  },
  
  Key: {
    majorKey: (tonic) => ({
      tonic,
      mode: 'major',
      alterations: []
    }),
    
    minorKey: (tonic) => ({
      tonic,
      mode: 'minor', 
      alterations: []
    })
  }
};
